<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BattleBots Control</title>
    <style>
        body { font-family: 'Arial', sans-serif; text-align: center; background-color: #222; color: white; }
        .scoreboard { display: flex; justify-content: center; gap: 50px; margin-top: 50px; }
        .player { background: #333; padding: 20px; border-radius: 10px; min-width: 200px; }
        .score { font-size: 80px; font-weight: bold; color: #4CAF50; }
        h1 { margin-bottom: 0; }
        
        .controls { margin-top: 50px; }
        button { font-size: 24px; padding: 15px 30px; border: none; border-radius: 5px; cursor: pointer; margin: 10px; }
        #startBtn { background-color: #4CAF50; color: white; }
        #stopBtn { background-color: #f44336; color: white; }
        button:disabled { background-color: #555; cursor: not-allowed; }

        #status { margin-top: 20px; font-style: italic; color: #aaa; }
        #winner { color: yellow; font-size: 30px; margin-top: 20px; font-weight: bold; height: 40px;}
    </style>
</head>
<body>

    <h1>BattleBots Arena</h1>
    <div id="status">Connecting...</div>

    <div id="winner"></div>

    <div class="scoreboard">
        <div class="player">
            <h2>Player 1</h2>
            <div id="p1-score" class="score">3</div>
        </div>
        <div class="player">
            <h2>Player 2</h2>
            <div id="p2-score" class="score">3</div>
        </div>
    </div>

    <div class="controls">
        <button id="startBtn" onclick="startGame()">Start Game</button>
        <button id="stopBtn" onclick="stopGame()" disabled>Stop Game</button>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const statusDiv = document.getElementById('status');
        const winnerDiv = document.getElementById('winner');
        const p1Div = document.getElementById('p1-score');
        const p2Div = document.getElementById('p2-score');

        socket.on('status', (status) => {
            statusDiv.innerText = "Status: " + status.toUpperCase();
            if (status === 'running') {
                startBtn.disabled = true;
                stopBtn.disabled = false;
                winnerDiv.innerText = "";
            } else {
                startBtn.disabled = false;
                stopBtn.disabled = true;
            }
        });

        socket.on('score_update', (score) => {
            p1Div.innerText = score.p1;
            p2Div.innerText = score.p2;
        });

        socket.on('game_over', (msg) => {
            winnerDiv.innerText = msg;
        });

        function startGame() {
            socket.emit('start_game');
        }

        function stopGame() {
            socket.emit('stop_game');
        }
    </script>
</body>
</html>